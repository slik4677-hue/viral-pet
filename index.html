<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>CIVIL WAR: USA</title>
    <link href="https://fonts.googleapis.com/css2?family=Black+Ops+One&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #ffaa00; /* –û—Ä–∞–Ω–∂–µ–≤—ã–π (Amber) - –∫–ª–∞—Å—Å–∏–∫–∞ –≤–æ–µ–Ω–Ω—ã—Ö –¥–∏—Å–ø–ª–µ–µ–≤ */
            --bg: #050505;
            --panel: #111;
            --scanline: rgba(18, 16, 16, 0.5);
            --neon-red: #ff3333;
        }

        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            user-select: none; -webkit-user-select: none;
            touch-action: manipulation;
        }

        body {
            background-color: var(--bg);
            color: var(--primary);
            font-family: 'Share Tech Mono', monospace;
            margin: 0; height: 100vh; overflow: hidden;
            display: flex; flex-direction: column;
            padding-top: env(safe-area-inset-top);
            padding-bottom: env(safe-area-inset-bottom);
        }

        /* --- –≠–§–§–ï–ö–¢ –°–¢–ê–†–û–ì–û –ú–û–ù–ò–¢–û–†–ê (CRT) --- */
        .scanlines {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%),
                        linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            background-size: 100% 2px, 3px 100%;
            z-index: 9999; pointer-events: none; opacity: 0.4;
        }

        /* –§–û–ù–û–í–ê–Ø –ö–ê–†–¢–ê */
        .map-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-image:
                radial-gradient(var(--primary) 1px, transparent 1px);
            background-size: 40px 40px;
            opacity: 0.05; z-index: -1;
        }

        /* –≠–ö–†–ê–ù–´ */
        .screen { flex: 1; display: none; flex-direction: column; align-items: center; width: 100%; position: relative; }
        .screen.active { display: flex; animation: turnOn 0.4s ease-out; }
        @keyframes turnOn { from {opacity:0; transform: scaleY(0);} to {opacity:1; transform: scaleY(1);} }

        /* --- –í–´–ë–û–† –®–¢–ê–¢–ê --- */
        .state-list { width: 100%; overflow-y: auto; padding: 20px; padding-bottom: 80px; }
        .state-card {
            background: rgba(20, 20, 20, 0.8); border: 1px solid #333;
            padding: 20px; margin-bottom: 12px;
            display: flex; justify-content: space-between; align-items: center;
            cursor: pointer; transition: 0.2s; position: relative; overflow: hidden;
        }
        .state-card::before {
            content: ''; position: absolute; left: 0; top: 0; height: 100%; width: 4px; background: #333; transition: 0.2s;
        }
        .state-card:active { transform: scale(0.98); border-color: var(--primary); }
        .state-card:active::before { background: var(--primary); }

        .state-flag { font-size: 32px; margin-right: 15px; filter: grayscale(0.3); }
        .state-name { font-weight: bold; font-size: 22px; font-family: 'Black Ops One', cursive; letter-spacing: 1px; }

        /* --- –ò–ì–†–û–í–û–ô –ò–ù–¢–ï–†–§–ï–ô–° --- */
        .header {
            width: 100%; padding: 10px 20px;
            display: flex; justify-content: space-between; align-items: flex-end;
            background: rgba(0,0,0,0.6); border-bottom: 1px solid #333;
        }
        .rank-badge { font-size: 10px; color: #888; border: 1px solid #333; padding: 2px 6px; margin-bottom: 2px; display: inline-block; }
        .my-state { font-family: 'Black Ops One'; font-size: 24px; color: #fff; text-shadow: 0 0 10px var(--primary); }
        #balance { font-size: 28px; font-weight: bold; color: var(--primary); text-shadow: 0 0 5px var(--primary); }

        /* –†–ê–ù–ì (–ü–†–û–ì–†–ï–°–°) */
        .rank-bar-container { width: 100%; background: #111; height: 4px; position: relative; }
        .rank-fill { height: 100%; background: var(--primary); width: 0%; box-shadow: 0 0 10px var(--primary); transition: width 0.5s; }
        .rank-text { width: 100%; text-align: center; font-size: 10px; padding: 4px; color: #666; background: #000; letter-spacing: 2px; }

        /* –ö–ù–û–ü–ö–ê-–†–ê–î–ê–† */
        .war-container {
            flex: 1; display: flex; align-items: center; justify-content: center; width: 100%;
            position: relative;
        }
        .radar {
            width: 260px; height: 260px; border-radius: 50%;
            background: radial-gradient(circle, #1a1a1a 0%, #000 70%);
            border: 2px solid var(--primary);
            box-shadow: 0 0 30px rgba(255, 170, 0, 0.15);
            position: relative; display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: 0.05s;
        }
        .radar.hit { transform: scale(0.96); border-color: #fff; box-shadow: 0 0 60px var(--primary); background: #221a00; }

        .radar-scan {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; border-radius: 50%;
            background: conic-gradient(from 0deg, transparent 0deg, rgba(255, 170, 0, 0.1) 60deg, transparent 60deg);
            animation: radarSpin 3s linear infinite; pointer-events: none;
        }
        @keyframes radarSpin { 100% { transform: rotate(360deg); } }

        .crosshair {
            position: absolute; width: 100%; height: 100%;
            background:
                linear-gradient(rgba(255, 170, 0, 0.2) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 170, 0, 0.2) 1px, transparent 1px);
            background-size: 50px 50px; background-position: center; border-radius: 50%; opacity: 0.5; pointer-events: none;
        }

        .btn-label { font-size: 20px; font-family: 'Black Ops One'; pointer-events: none; color: #fff; }
        .btn-sub { font-size: 10px; pointer-events: none; margin-top: 5px; color: var(--primary); }

        /* –ù–ï–í–ò–î–ò–ú–´–ô –°–õ–û–ô –ö–õ–ò–ö–ê (–ò–î–ï–ê–õ–¨–ù–ê–Ø –ß–£–í–°–¢–í–ò–¢–ï–õ–¨–ù–û–°–¢–¨) */
        .click-layer { position: absolute; top:0; left:0; width:100%; height:100%; z-index: 100; border-radius: 50%; cursor: pointer; }

        /* –≠–ù–ï–†–ì–ò–Ø */
        .energy-box { width: 85%; margin-bottom: 20px; text-align: right; }
        .energy-val { font-size: 12px; margin-bottom: 2px; }
        .energy-track { height: 6px; background: #222; width: 100%; border: 1px solid #333; }
        .energy-fill { height: 100%; background: var(--primary); width: 100%; transition: width 0.1s; }

        /* –ò–ù–¢–ï–õ (–°–¢–ê–¢–ò–°–¢–ò–ö–ê) */
        .intel-row {
            width: 90%; padding: 15px; margin-bottom: 10px; border: 1px solid #333;
            background: rgba(0,0,0,0.5); display: flex; justify-content: space-between; align-items: center;
        }
        .intel-bar-bg { width: 100px; height: 6px; background: #222; margin-top: 5px; }
        .intel-bar { height: 100%; background: var(--neon-red); width: 40%; animation: pulseBar 3s infinite; }
        @keyframes pulseBar { 0% {opacity: 0.5;} 50% {opacity: 1;} 100% {opacity: 0.5;} }

        /* –ú–ï–ù–Æ */
        .nav {
            height: 70px; background: #080808; border-top: 1px solid #333;
            display: flex; width: 100%; padding-bottom: env(safe-area-inset-bottom);
        }
        .nav-item { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; opacity: 0.4; font-size: 10px; cursor: pointer; transition: 0.2s; }
        .nav-item.active { opacity: 1; color: var(--primary); text-shadow: 0 0 10px var(--primary); }
        .nav-icon { font-size: 24px; margin-bottom: 4px; }

        /* –í–´–õ–ï–¢–ê–Æ–©–ò–ï –¶–ò–§–†–´ */
        .float-text {
            position: absolute; font-family: 'Black Ops One'; font-size: 32px; color: #fff;
            pointer-events: none; z-index: 999; animation: floatUp 0.6s ease-out forwards;
            text-shadow: 2px 2px 0px #000;
        }
        @keyframes floatUp { to { transform: translateY(-100px); opacity: 0; } }

        /* –¢–†–Ø–°–ö–ê –≠–ö–†–ê–ù–ê (–ö–†–ò–¢) */
        .shake { animation: shake 0.3s; }
        @keyframes shake { 0% { transform: translate(1px, 1px) rotate(0deg); } 10% { transform: translate(-1px, -2px) rotate(-1deg); } 20% { transform: translate(-3px, 0px) rotate(1deg); } 30% { transform: translate(3px, 2px) rotate(0deg); } 40% { transform: translate(1px, -1px) rotate(1deg); } 50% { transform: translate(-1px, 2px) rotate(-1deg); } 60% { transform: translate(-3px, 1px) rotate(0deg); } 70% { transform: translate(3px, 1px) rotate(-1deg); } 80% { transform: translate(-1px, -1px) rotate(1deg); } 90% { transform: translate(1px, 2px) rotate(0deg); } 100% { transform: translate(1px, -2px) rotate(-1deg); } }

    </style>
</head>
<body>

    <div class="scanlines"></div>
    <div class="map-bg"></div>

    <div id="screen-select" class="screen active">
        <h2 style="margin-top: 40px; font-family: 'Black Ops One'; font-size: 30px; text-align: center; text-transform: uppercase;">Select Your<br><span style="color:#fff">War Zone</span></h2>
        <div class="state-list">
            <div class="state-card" onclick="pickState('TEXAS', 'ü§†')">
                <div class="state-flag">ü§†</div>
                <div class="state-name">TEXAS</div>
            </div>
            <div class="state-card" onclick="pickState('CALIFORNIA', 'üå¥')">
                <div class="state-flag">üå¥</div>
                <div class="state-name">CALIFORNIA</div>
            </div>
            <div class="state-card" onclick="pickState('NEW YORK', 'üóΩ')">
                <div class="state-flag">üóΩ</div>
                <div class="state-name">NEW YORK</div>
            </div>
            <div class="state-card" onclick="pickState('FLORIDA', 'üêä')">
                <div class="state-flag">üêä</div>
                <div class="state-name">FLORIDA</div>
            </div>
            <div class="state-card" onclick="pickState('OHIO', 'üíÄ')">
                <div class="state-flag">üíÄ</div>
                <div class="state-name">OHIO</div>
            </div>
        </div>
    </div>

    <div id="screen-game" class="screen">
        <div class="rank-text" id="rankName">RANK: PRIVATE</div>
        <div class="rank-bar-container">
            <div class="rank-fill" id="rankFill"></div>
        </div>

        <div class="header">
            <div>
                <div class="rank-badge">OPERATOR</div>
                <div class="my-state" id="displayState">TEXAS</div>
            </div>
            <div style="text-align: right;">
                <div style="font-size: 10px; color: #888;">BUDGET</div>
                <div id="balance">$0</div>
            </div>
        </div>

        <div class="war-container">
            <div class="radar" id="radarBtn">
                <div class="radar-scan"></div>
                <div class="crosshair"></div>
                <div class="btn-label">ATTACK</div>
                <div class="btn-sub">NEIGHBOR</div>
            </div>
            <div class="click-layer" id="trigger"></div>
        </div>

        <div class="energy-box">
            <div class="energy-val" id="energyVal">POWER: 1000</div>
            <div class="energy-track">
                <div class="energy-fill" id="energyFill"></div>
            </div>
        </div>
    </div>

    <div id="screen-intel" class="screen">
        <h2 style="font-family: 'Black Ops One'; letter-spacing: 2px; margin-bottom: 30px;">LIVE INTEL</h2>

        <div class="intel-row">
            <div>
                <div style="font-weight: bold; color: #fff;">CALIFORNIA</div>
                <div style="font-size: 10px; color: var(--neon-red);">ATTACKING...</div>
            </div>
            <div>
                <div style="font-size: 12px; text-align: right;">$840,201,442</div>
                <div class="intel-bar-bg"><div class="intel-bar" style="width: 80%"></div></div>
            </div>
        </div>

        <div class="intel-row">
            <div>
                <div style="font-weight: bold; color: #fff;">TEXAS</div>
                <div style="font-size: 10px; color: var(--primary);">DEFENDING...</div>
            </div>
            <div>
                <div style="font-size: 12px; text-align: right;">$810,550,120</div>
                <div class="intel-bar-bg"><div class="intel-bar" style="width: 75%"></div></div>
            </div>
        </div>

        <div class="intel-row">
            <div>
                <div style="font-weight: bold; color: #fff;">NEW YORK</div>
                <div style="font-size: 10px; color: #666;">OFFLINE</div>
            </div>
            <div>
                <div style="font-size: 12px; text-align: right;">$420,000,000</div>
                <div class="intel-bar-bg"><div class="intel-bar" style="width: 40%"></div></div>
            </div>
        </div>

        <div style="margin-top: 20px; font-size: 10px; color: #666; width: 80%; text-align: center;">
            * DATA UPDATING REAL-TIME FROM PENTAGON SERVERS
        </div>
    </div>

    <div id="screen-crew" class="screen">
        <h2 style="font-family: 'Black Ops One'; margin-top: 50px;">RECRUITMENT</h2>
        <div style="width: 80%; text-align: center; font-size: 12px; color: #aaa; line-height: 1.5;">
            We need more soldiers on the front lines.<br>
            Bring reinforcements.<br><br>
            <span style="color: var(--primary); font-size: 14px;">BONUS: +10% OF LOOT</span>
        </div>

        <div style="background: rgba(255,255,255,0.05); border: 1px solid #333; padding: 30px; margin: 30px 0; border-radius: 10px;">
            <div style="font-size: 40px; margin-bottom: 10px;">ü™ñ</div>
            <div style="font-weight: bold;">0 RECRUITS</div>
        </div>

        <button onclick="copyLink()" style="width: 80%; padding: 15px; background: var(--primary); border: none; font-weight: bold; font-family: inherit; font-size: 16px; clip-path: polygon(5% 0, 100% 0, 100% 80%, 95% 100%, 0 100%, 0 20%);">COPY ORDER</button>
        <div id="toast" style="opacity: 0; margin-top: 10px; font-size: 10px; transition: 0.3s;">COPIED TO CLIPBOARD</div>
    </div>

    <div class="nav">
        <div class="nav-item active" onclick="go('game', this)"><span class="nav-icon">‚öîÔ∏è</span>WAR</div>
        <div class="nav-item" onclick="go('intel', this)"><span class="nav-icon">üì°</span>INTEL</div>
        <div class="nav-item" onclick="go('crew', this)"><span class="nav-icon">ü™ñ</span>CREW</div>
    </div>

    <script>
        // --- –î–ê–ù–ù–´–ï ---
        let myState = localStorage.getItem('cw_state');
        let balance = parseInt(localStorage.getItem('cw_bal') || '0');
        let energy = 1000;

        // --- –ó–í–ê–ù–ò–Ø ---
        const RANKS = [
            { name: "PRIVATE", req: 0 },
            { name: "CORPORAL", req: 5000 },
            { name: "SERGEANT", req: 15000 },
            { name: "LIEUTENANT", req: 50000 },
            { name: "CAPTAIN", req: 100000 },
            { name: "MAJOR", req: 250000 },
            { name: "COLONEL", req: 500000 },
            { name: "GENERAL", req: 1000000 },
            { name: "PRESIDENT", req: 100000000 }
        ];

        // –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–ï –ü–†–ò –í–•–û–î–ï
        if(localStorage.getItem('cw_time')) {
            let passed = (Date.now() - parseInt(localStorage.getItem('cw_time'))) / 1000;
            let savedEng = parseInt(localStorage.getItem('cw_eng') || '1000');
            energy = Math.min(1000, savedEng + Math.floor(passed * 5));
        }

        // –≠–õ–ï–ú–ï–ù–¢–´
        const balEl = document.getElementById('balance');
        const engFill = document.getElementById('energyFill');
        const engVal = document.getElementById('energyVal');
        const radar = document.getElementById('radarBtn');
        const trigger = document.getElementById('trigger');
        const rankName = document.getElementById('rankName');
        const rankFill = document.getElementById('rankFill');

        if(myState) startGame();

        function pickState(name) {
            myState = name;
            localStorage.setItem('cw_state', name);
            startGame();
        }

        function startGame() {
            document.getElementById('screen-select').classList.remove('active');
            document.getElementById('screen-game').classList.add('active');
            document.getElementById('displayState').innerText = myState;
            updateUI();
        }

        // --- –ë–û–ï–í–û–ô –ö–õ–ò–ö–ï–† ---
        trigger.addEventListener('pointerdown', function(e) {
            e.preventDefault();
            if(energy < 10) {
                if(navigator.vibrate) navigator.vibrate(50);
                return;
            }

            // –í–∏–∑—É–∞–ª
            radar.classList.add('hit');
            setTimeout(() => radar.classList.remove('hit'), 80);

            // –í–∏–±—Ä–∞—Ü–∏—è
            if(navigator.vibrate) navigator.vibrate(15);

            // –õ–æ–≥–∏–∫–∞
            let gain = Math.floor(Math.random() * 9) + 4; // $4-$12
            let crit = Math.random() > 0.97; // 3% –ö—Ä–∏—Ç

            if(crit) {
                gain = 150;
                document.body.classList.add('shake');
                setTimeout(()=>document.body.classList.remove('shake'), 300);
                if(navigator.vibrate) navigator.vibrate([30,50,30]);
            }

            balance += gain;
            energy -= 10;

            save();
            updateUI();

            // –ü–æ–ø-–∞–ø —Ü–∏—Ñ—Ä—ã
            let x = e.clientX || window.innerWidth/2;
            let y = e.clientY || window.innerHeight/2;
            spawnFloat(x, y, gain, crit);
        });

        function spawnFloat(x, y, val, crit) {
            const el = document.createElement('div');
            el.className = 'float-text';
            el.innerText = "+$" + val;
            if(crit) {
                el.style.color = "#fff";
                el.style.fontSize = "40px";
                el.innerText = "CRITICAL +$" + val;
            }
            // –†–∞–∑–±—Ä–æ—Å
            let rx = (Math.random() - 0.5) * 50;
            el.style.left = (x + rx - 20) + 'px';
            el.style.top = (y - 50) + 'px';
            document.body.appendChild(el);
            setTimeout(() => el.remove(), 600);
        }

        function updateUI() {
            balEl.innerText = "$" + balance.toLocaleString();
            engFill.style.width = (energy / 1000 * 100) + "%";
            engVal.innerText = "POWER: " + Math.floor(energy);

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –†–∞–Ω–≥–∞
            let currentRank = RANKS[0];
            let nextRank = RANKS[1];

            for(let i=0; i<RANKS.length; i++) {
                if(balance >= RANKS[i].req) {
                    currentRank = RANKS[i];
                    nextRank = RANKS[i+1] || RANKS[i];
                }
            }

            rankName.innerText = "RANK: " + currentRank.name;

            // –ü—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä —Ä–∞–Ω–≥–∞
            if(currentRank.name === "PRESIDENT") {
                rankFill.style.width = "100%";
            } else {
                let range = nextRank. Req - currentRank.req;
                let progress = balance - currentRank.req;
                let percent = (progress / range) * 100;
                rankFill.style.width = percent + "%";
            }
        }

        function save() {
            localStorage.setItem('cw_bal', balance);
            localStorage.setItem('cw_eng', energy);
            localStorage.setItem('cw_time', Date.now());
        }

        setInterval(() => {
            if(energy < 1000) { energy += 5; updateUI(); save(); }
        }, 1000);

        window.go = function(id, el) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            document.getElementById('screen-' + id).classList.add('active');
            el.classList.add('active');
        }

        window.copyLink = function() {
            const t = document.getElementById('toast');
            t.style.opacity = 1;
            setTimeout(() => t.style.opacity = 0, 2000);
            if(navigator.vibrate) navigator.vibrate(50);
        }

    </script>
</body>
</html>